<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Gestion des employés</title>
</head>
<body>
<div class="box">
    <h1>Formulaire</h1>

    <div class="form-box">
        <h2>Enregistrer un nouvel utilisateur</h2>
        <form id="form-user">
            <div class="form-row">
                <div class="form-group">
                    <label for="firstName">Prénom *</label>
                    <input type="text" id="firstName" required>
                </div>
                <div class="form-group">
                    <label for="lastName">Nom *</label>
                    <input type="text" id="lastName" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="companyId">ID Entreprise *</label>
                    <input type="number" id="companyId" required>
                </div>
                <div class="form-group">
                    <label for="companyPosition">Poste *</label>
                    <select id="companyPosition" required>
                        <option value="">-- Sélectionner --</option>
                        <option value="Consultant">Consultant</option>
                        <option value="Team manager">Team manager</option>
                        <option value="Product owner">Product owner</option>
                        <option value="Business analyst">Business analyst</option>
                        <option value="Student">Student</option>
                    </select>
                </div>
            </div>

            <button type="submit">Ajouter l'utilisateur</button>
        </form>
    </div>

    <div class="table-section">
        <h2>Liste des utilisateurs</h2>
        <table id="usersTable">
            <thead>
            <tr>
                <th>Prénom</th>
                <th>Nom</th>
                <th>ID Entreprise</th>
                <th>Poste</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody id="usersTableBody">
            <tr class="empty-message">
                <td colspan="5">Aucun utilisateur enregistré</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    let users = JSON.parse(localStorage.getItem('users')) || [];

    const form = document.getElementById('userForm');
    const tableBody = document.getElementById('usersTableBody');

    form.addEventListener('submit', (e) => {
        e.preventDefault();

        const newUser = {
            id: Date.now(),
            firstName: document.getElementById('firstName').value.trim(),
            lastName: document.getElementById('lastName').value.trim(),
            companyId: parseInt(document.getElementById('companyId').value),
            companyPosition: document.getElementById('companyPosition').value
        };

        users.push(newUser);
        localStorage.setItem('users', JSON.stringify(users));

        form.reset();
        renderTable();
    });

    function renderTable() {
        tableBody.innerHTML = '';

        if (users.length === 0) {
            tableBody.innerHTML = '<tr class="empty-message"><td colspan="5">Aucun utilisateur enregistré</td></tr>';
            return;
        }

        users.forEach((user) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                    <td>${user.firstName}</td>
                    <td>${user.lastName}</td>
                    <td>${user.companyId}</td>
                    <td>${user.companyPosition}</td>
                    <td><button class="btn-delete" onclick="deleteUser(${user.id})">Supprimer</button></td>
                `;
            tableBody.appendChild(row);
        });
    }

    function deleteUser(id) {
        users = users.filter(user => user.id !== id);
        localStorage.setItem('users', JSON.stringify(users));
        renderTable();
    }

    renderTable();
</script>

</body>
</html>